{"version":3,"file":null,"sources":["../src/utilities.ts","../src/perceptron.ts"],"sourcesContent":["export function zip<T>(xs: T[], ys: T[]) {\r\n  const smallerArray = xs.length < ys.length ? xs : ys;\r\n\r\n  return smallerArray\r\n    .map((x, i) => [xs[i], ys[i]]);\r\n}\r\n\r\nexport function dotProduct(xs: number[], ys: number[]) {\r\n  return zip(xs, ys)\r\n    .map(([x,y]) => x * y)\r\n    .reduce((a, b) => a + b)\r\n}","import * as util from './utilities';\r\n\r\nexport interface ITrainingData {\r\n  vector: number[];\r\n  output: boolean;\r\n}\r\n\r\nexport class Perceptron {\r\n  threshold: number;\r\n  learningRate: number;\r\n  weights: number[];\r\n\r\n  constructor(threshold: number = 0.5, learningRate: number = 0.1) {\r\n    this.threshold = threshold;\r\n    this.learningRate = learningRate;\r\n  }\r\n  \r\n  train(trainingSet: ITrainingData[], threshold: number = this.threshold, learningRate: number = this.learningRate) {\r\n    if (trainingSet.length === 0) {\r\n      throw new Error(`trainingSet data must be non-empty array. You provided: ${trainingSet}`);\r\n    }\r\n\r\n    // Create new weights vector matching length of training data and set values to 0\r\n    const weights = Array.apply(null, new Array(trainingSet[0].vector.length)).map(() => 0);\r\n    const maxIterations = 2000;\r\n    let i = 1;\r\n\r\n    for(i = 1; i <= maxIterations; i++) {\r\n      let errorCount = 0;\r\n      trainingSet\r\n        .forEach(({ vector, output }) => {\r\n          const dotProduct = util.dotProduct(vector, weights);\r\n          const result = dotProduct >= threshold;\r\n          const error = (output ? 1 : 0) - (result ? 1 : 0);\r\n          console.log(`Vector: ${vector}, Weights: ${weights}, Output: ${dotProduct} - ${result}, Expected: ${threshold} - ${output}`);\r\n\r\n          if (error !== 0) {\r\n            errorCount += 1;\r\n            console.log('adjust weights');\r\n            vector\r\n              .forEach((x, i) => {\r\n                weights[i] += learningRate * error * x;\r\n              });\r\n          }\r\n        });\r\n\r\n      if (errorCount === 0) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (i === maxIterations) {\r\n      throw new Error('Max Iterations reached. The training loop was terminated to prevent infinite loop');\r\n    }\r\n\r\n    this.weights = weights;\r\n  }\r\n\r\n  perceive(vector: number[], weights = this.weights, threshold = this.threshold): boolean {\r\n    if(vector.length !== weights.length) {\r\n      throw new Error(`The number of dimensions of the input vector must match the number of weights. You passed vector length: ${vector.length}, weights.length: ${weights.length}`);\r\n    }\r\n\r\n    return util.dotProduct(vector, weights) >= threshold;\r\n  }\r\n}"],"names":["dotProduct","util.dotProduct"],"mappings":"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"}